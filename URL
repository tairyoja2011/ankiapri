https://tairyoja2011.github.io/ankiapri/index.html


ï¼‘ï¼è©•ä¾¡å›æ•°ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§ã‚‚ä¿å­˜ã™ã‚‹ã€‚
ï¼’ï¼ç­”ãˆã®æ›´æ–°ã‚’å¯èƒ½ã¨ã™ã‚‹ã€‚
ï¼“ï¼ãƒ€ãƒ¡ã€ã‚ªãƒƒã‚±ãƒ¼ã€å®Œç’§ã®ã‚‚ã®ã ã‘ã‚’å‡ºé¡Œã™ã‚‹ã€‚
ï¼”ï¼å›ç­”ä»¶æ•°ãŒå°‘ãªã„ã‚‚ã®ã‚’å°‘ã—å¤šã‚ã«å‡ºé¡Œã™ã‚‹ã‚ˆã†ã«ã—ãŸã„ã€‚
ï¼•ï¼å•é¡Œã®è¿½åŠ ã‚‚ã§ãã‚‹ã‚ˆã†ã«ã—ãŸã„ã€‚
ï¼–ï¼è‡ªåˆ†ã§ç­”ãˆã‚’å…¥åŠ›ã™ã‚‹ãƒ¢ãƒ¼ãƒ‰ã‚‚ä½œæˆã—ãŸã„ã€‚
ï¼—ï¼ãƒˆãƒƒãƒ—ç”»é¢ã«ä½•ã®å˜èªå¸³ã‹ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã€ãã®å¾Œã«ãƒ¢ãƒ¼ãƒ‰ã‚’å‡ºåŠ›ã™ã‚‹
ã€€ã€€ãƒ¢ãƒ¼ãƒ‰ã¯å˜èªå¸³ãƒ¢ãƒ¼ãƒ‰ã®æ¬„ã«ã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒãƒ€ãƒ¡ãƒ»ã‚ªãƒƒã‚±ãƒ¼ã®ã‚‚ã®ã€å®Œç’§ãªã‚‚ã®ã«ã‚ã‘ã‚‹

ï¼‘ï¼ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸	2-1ï¼å¿œç”¨æƒ…å ±ç”¨	3-1.ä¸€è¦§é–²è¦§ãƒ¢ãƒ¼ãƒ‰	ãã®ã¾ã¾csvã®å†…å®¹ã‚’åˆ†ã‹ã‚Šã‚„ã™ãè¡¨ç¤º
		3-2.å…¨å•å‡ºé¡Œãƒ¢ãƒ¼ãƒ‰	ä»Šã¾ã§ã¨åŒæ§˜
		3-3.ãƒ€ãƒ¡å‡ºåŠ›ãƒ¢ãƒ¼ãƒ‰	ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒé§„ç›®ã®ã‚‚ã®ã ã‘ã‚’å‡ºé¡Œ
		3-4.ã‚ªãƒƒã‚±ãƒ¼ãƒ»å®Œç’§ãƒ¢ãƒ¼ãƒ‰	ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒã‚ªãƒƒã‚±ãƒ¼ãƒ»å®Œç’§ã®ã‚‚ã®ã ã‘ã‚’å‡ºé¡Œ
		3-5.å…¥åŠ›ãƒ¢ãƒ¼ãƒ‰	è‡ªåˆ†ã§ç­”ãˆã‚’å…¥åŠ›ã™ã‚‹ã‚‚ãƒ¢ãƒ¼ãƒ‰
			
	2-2ï¼ãƒã‚¹ãƒš		

-----------------------------------------------------
backup
index.html

<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Myæš—è¨˜ã‚¢ãƒ—ãƒª Pro</title>
    <link rel="manifest" href="manifest.json">
    <style>
        body { 
            font-family: -apple-system, sans-serif; 
            text-align: center; 
            background: #f5f7fa; 
            margin: 0; 
            padding-top: 30px; 
            padding-bottom: 100px; /* ä¸‹éƒ¨ã«ä½™è£•ã‚’æŒãŸã›ã‚‹ */
            min-height: 100vh;
            position: relative;
            box-sizing: border-box;
        }
        .container { width: 90%; max-width: 400px; margin: 0 auto; }
        
        /* ã‚«ãƒ¼ãƒ‰ã¯å•é¡Œã¨ç­”ãˆå°‚ç”¨ã« */
        #card { 
            background: white; 
            min-height: 220px; /* çµ±è¨ˆã‚’å‡ºã•ãªã„åˆ†ã€å°‘ã—é«˜ã•ã‚’æŠ‘ãˆã‚‹ */
            margin-bottom: 20px; 
            padding: 20px; 
            border-radius: 25px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.08); 
            display: flex; 
            align-items: center; 
            justify-content: center; 
        }
        #question { font-size: 32px; font-weight: bold; color: #333; }
        #answer { font-size: 24px; color: #ff4757; font-weight: bold; margin-top: 10px; }

        /* ãƒœã‚¿ãƒ³ã‚¨ãƒªã‚¢ */
        .button-area { display: flex; flex-direction: column; gap: 12px; margin-bottom: 25px; }
        button { border: none; padding: 18px; border-radius: 15px; font-size: 18px; font-weight: bold; cursor: pointer; }
        .show-btn { background: #007aff; color: white; width: 100%; }
        .eval-container { display: none; gap: 10px; width: 100%; }
        .eval-btn { flex: 1; color: white; font-size: 14px; }
        .bad { background: #ff4757; }
        .good { background: #ffa502; }
        .perfect { background: #2ed573; }

        /* çµ±è¨ˆæƒ…å ±ã®ã‚°ãƒªãƒƒãƒ‰ï¼ˆãƒœã‚¿ãƒ³ã®ä¸‹ã«é…ç½®ï¼‰ */
        .stats-grid { 
            display: grid; 
            grid-template-columns: repeat(4, 1fr); 
            gap: 6px; 
            padding: 15px;
            background: rgba(255, 255, 255, 0.5); /* å°‘ã—é€ã‘ãŸç™½ */
            border-radius: 15px;
        }
        .stat-item { 
            background: white; padding: 8px 2px; border-radius: 10px; 
            display: flex; flex-direction: column; align-items: center; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.03);
        }
        .label { font-size: 9px; color: #888; margin-bottom: 2px; }
        .val { font-size: 13px; font-weight: bold; color: #444; }
        .stat-item.full { grid-column: 1 / span 4; background: #eef2ff; margin-bottom: 4px; }
        
        #saveStatus { font-size: 12px; color: #aaa; margin-top: 10px; height: 1.5em; }

        .reset-link { 
            position: fixed; bottom: 10px; left: 0; width: 100%; 
            color: #ff4757; font-size: 11px; text-decoration: underline; 
            background: none; border: none; cursor: pointer; opacity: 0.7; 
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="card">
            <div style="width: 100%;">
                <div id="question">èª­ã¿è¾¼ã¿ä¸­...</div>
                <div id="answer" style="display:none;"></div>
            </div>
        </div>

        <div class="button-area">
            <button id="showAnswerBtn" class="show-btn" onclick="flipCard()">ç­”ãˆã‚’è¦‹ã‚‹</button>
            <div id="evalContainer" class="eval-container">
                <button class="eval-btn bad" onclick="handleEval('ãƒ€ãƒ¡')">ãƒ€ãƒ¡</button>
                <button class="eval-btn good" onclick="handleEval('ã‚ªãƒƒã‚±ãƒ¼')">ã‚ªãƒƒã‚±ãƒ¼</button>
                <button class="eval-btn perfect" onclick="handleEval('å®Œç’§')">å®Œç’§</button>
            </div>
        </div>

        <div id="statsArea" class="stats-grid" style="display:none">
            <div class="stat-item full"><span class="label">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</span><span id="statStatus" class="val">-</span></div>
            <div class="stat-item"><span class="label">åˆè¨ˆ</span><span id="statTotal" class="val">0</span></div>
            <div class="stat-item"><span class="label">ãƒ€ãƒ¡</span><span id="statBad" class="val">0</span></div>
            <div class="stat-item"><span class="label">OK</span><span id="statGood" class="val">0</span></div>
            <div class="stat-item"><span class="label">å®Œç’§</span><span id="statPerfect" class="val">0</span></div>
        </div>

        <div id="saveStatus"></div>
    </div>
    
    <button class="reset-link" onclick="resetAllStats()">å­¦ç¿’å±¥æ­´ã‚’ã™ã¹ã¦ãƒªã‚»ãƒƒãƒˆ</button>

    <script src="script.js"></script>
</body>
</html>

-----------------------------------------------------
backup
script.js

// --- è¨­å®šã‚¨ãƒªã‚¢ ---
//ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã®Webå…¬é–‹(CSV)URL
const READ_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQiBU73LGsFHvtGPvST1fPIxvetpofBMFpKeQTLHBZN0wtMPOQKJnTbzjTcCNTew5fiVwXoVL1dlPQB/pub?gid=0&single=true&output=csv";
//"å…ˆã»ã©ã‚³ãƒ”ãƒ¼ã—ãŸGASã®ã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªURL";
const WRITE_URL = "https://script.google.com/macros/s/AKfycbzxEnfw0-oIgZ_cPZriklw73B49bhDq8zXXRUT5qEu6mQwHbyeS3Q-EYjmNeULDdYCl/exec";

let queue = [];
let currentCard = null;

const questionEl = document.getElementById("question");
const answerEl = document.getElementById("answer");
const statsArea = document.getElementById("statsArea");
const showAnswerBtn = document.getElementById("showAnswerBtn");
const evalContainer = document.getElementById("evalContainer");
const saveStatusEl = document.getElementById("saveStatus");

async function loadData() {
    try {
        const response = await fetch(READ_URL);
        const csvText = await response.text();
        const rows = csvText.split(/\r?\n/).slice(1); 
        const localPerfectList = JSON.parse(localStorage.getItem('perfectCards') || "[]");

        const flashcards = rows.filter(row => row.trim() !== "").map(row => {
            const cols = row.split(',');
            return { 
                q: cols[0]?.trim() || "", 
                a: cols[1]?.trim() || "", 
                status: cols[2]?.trim() || "æœªç€æ‰‹",
                // æ–‡å­—åˆ—ã§ã¯ãªãæ•°å€¤(Number)ã¨ã—ã¦ä¿æŒã™ã‚‹
                bad: Number(cols[3]) || 0,
                good: Number(cols[4]) || 0,
                perfect: Number(cols[5]) || 0,
                total: Number(cols[6]) || 0
            };
        }).filter(card => card.status !== "å®Œç’§" && !localPerfectList.includes(card.q));

        queue = [...flashcards];
        shuffleArray(queue);
        showNextCard();
    } catch (error) { questionEl.textContent = "èª­ã¿è¾¼ã¿å¤±æ•—"; }
}

function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
}

// ç”»é¢ã®çµ±è¨ˆè¡¨ç¤ºã‚’æ›´æ–°ã™ã‚‹å°‚ç”¨ã®é–¢æ•°
function updateStatsDisplay(card) {
    document.getElementById("statStatus").textContent = card.status;
    document.getElementById("statTotal").textContent = card.total;
    document.getElementById("statBad").textContent = card.bad;
    document.getElementById("statGood").textContent = card.good;
    document.getElementById("statPerfect").textContent = card.perfect;
}

function showNextCard() {
    if (queue.length === 0) {
        questionEl.textContent = "å…¨å•å®Œäº†ï¼ ğŸ‰";
        answerEl.textContent = "";
        statsArea.style.display = "none";
        showAnswerBtn.style.display = "none";
        evalContainer.style.display = "none";
        return;
    }
    currentCard = queue.shift();
    
    questionEl.textContent = currentCard.q;
    answerEl.textContent = currentCard.a;
    
    // ç¾åœ¨ä¿æŒã—ã¦ã„ã‚‹æ•°å€¤ã‚’è¡¨ç¤º
    updateStatsDisplay(currentCard);

    answerEl.style.display = "none";
    statsArea.style.display = "grid";
    showAnswerBtn.style.display = "block";
    evalContainer.style.display = "none";
}

function flipCard() {
    answerEl.style.display = "block";
    showAnswerBtn.style.display = "none";
    evalContainer.style.display = "flex";
}

async function saveToSheet(word, rating) {
    saveStatusEl.textContent = "ä¿å­˜ä¸­...";
    if (rating === 'å®Œç’§') {
        const list = JSON.parse(localStorage.getItem('perfectCards') || "[]");
        list.push(word);
        localStorage.setItem('perfectCards', JSON.stringify(list));
    }
    try {
        await fetch(WRITE_URL, {
            method: "POST",
            mode: "no-cors",
            body: JSON.stringify({ word: word, status: rating })
        });
        saveStatusEl.textContent = "ä¿å­˜å®Œäº†";
        setTimeout(() => saveStatusEl.textContent = "", 1500);
    } catch (e) { saveStatusEl.textContent = "ä¿å­˜å¤±æ•—"; }
}

function handleEval(rating) {
    // --- ç”»é¢ä¸Šã®æ•°å€¤ã‚’å³åº§ã«ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒƒãƒ—ã™ã‚‹ ---
    currentCard.status = rating;
    currentCard.total += 1;
    if (rating === 'ãƒ€ãƒ¡') currentCard.bad += 1;
    if (rating === 'ã‚ªãƒƒã‚±ãƒ¼') currentCard.good += 1;
    if (rating === 'å®Œç’§') currentCard.perfect += 1;

    // æ•°å€¤ãŒå¢—ãˆãŸçŠ¶æ…‹ã§ç”»é¢ã‚’æ›´æ–°ï¼ˆä¸€ç¬è¦‹ãˆã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ï¼‰
    updateStatsDisplay(currentCard);

    // ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã¸ã®é€ä¿¡ï¼ˆãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ï¼‰
    saveToSheet(currentCard.q, rating); 

    // å‡ºé¡Œé †ã®èª¿æ•´
    if (rating === 'ãƒ€ãƒ¡') {
        queue.splice(1, 0, currentCard); // æ¬¡ã®æ¬¡ã®ä½ç½®ã¸
    } else if (rating === 'ã‚ªãƒƒã‚±ãƒ¼') {
        queue.push(currentCard); // æœ€å¾Œå°¾ã¸
    }
    
    showNextCard();
}

async function resetAllStats() {
    if (!confirm("ã™ã¹ã¦ã®å­¦ç¿’å±¥æ­´ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ")) return;
    saveStatusEl.textContent = "ãƒªã‚»ãƒƒãƒˆä¸­...";
    localStorage.removeItem('perfectCards');
    try {
        await fetch(WRITE_URL, {
            method: "POST",
            mode: "no-cors",
            body: JSON.stringify({ action: "reset_all" })
        });
        saveStatusEl.textContent = "ãƒªã‚»ãƒƒãƒˆå®Œäº†ï¼å†èµ·å‹•ã—ã¾ã™...";
        setTimeout(() => location.reload(), 2000);
    } catch (e) { saveStatusEl.textContent = "ãƒªã‚»ãƒƒãƒˆå¤±æ•—"; }
}

loadData();
